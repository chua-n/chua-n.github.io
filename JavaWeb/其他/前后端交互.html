<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.59" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://chua-n.com/JavaWeb/%E5%85%B6%E4%BB%96/%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92.html"><meta property="og:site_name" content="荒流的笔趣屋"><meta property="og:title" content="前后端交互"><meta property="og:description" content="1. 跨域问题 在 Web 浏览器中，源（origin）是指 源 = 协议+域名+端口，可通过 js 的 window.origin 来获取，例如，在我的笔记静态网站中通过浏览器控制台执行该命令得到的结果是： 如果两个 url 的 协议名、域名、端口号完全一致，则称他们同源。 同源策略是指在 Web 浏览器规定，如果 js 运行在源 A 中，那么就只能..."><meta property="og:type" content="article"><meta property="og:image" content="https://figure-bed.chua-n.com/JavaWeb/其他/3.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-05-05T13:18:29.000Z"><meta property="article:modified_time" content="2024-05-05T13:18:29.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"前后端交互","image":["https://figure-bed.chua-n.com/JavaWeb/其他/3.png","https://figure-bed.chua-n.com/JavaWeb/其他/5.png","https://figure-bed.chua-n.com/JavaWeb/其他/11.png","https://figure-bed.chua-n.com/JavaWeb/其他/6.png","https://figure-bed.chua-n.com/JavaWeb/其他/7.png","https://figure-bed.chua-n.com/JavaWeb/其他/8.png","https://figure-bed.chua-n.com/JavaWeb/其他/9.jpg","https://figure-bed.chua-n.com/JavaWeb/其他/10.jpg"],"dateModified":"2024-05-05T13:18:29.000Z","author":[{"@type":"Person","name":"荒流","url":"https://chua-n.com","email":"chua_n@qq.com"}]}</script><script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?d41714388d97166c965a387883f8c5e0";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
      </script><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/logo-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/logo-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/logo-apple-152.png" type="image/png" sizes="152x152"><link rel="icon" href="/assets/icon/logo-32.png" type="image/png" sizes="32x32"><link rel="icon" href="/assets/icon/logo-16.png" type="image/png" sizes="16x16"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#6a005f"><link rel="apple-touch-icon" href="/assets/icon/logo-apple-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/logo-ms-144.png"><meta name="msapplication-TileColor" content="#ffffff"><link rel="alternate" type="application/atom+xml" href="https://chua-n.com/atom.xml" title="荒流的笔趣屋 Atom Feed"><link rel="alternate" type="application/json" href="https://chua-n.com/feed.json" title="荒流的笔趣屋 JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://chua-n.com/rss.xml" title="荒流的笔趣屋 RSS Feed"><link rel="icon" href="https://figure-bed.chua-n.com/logo/川.ico"><title>前后端交互 | 荒流的笔趣屋</title><meta name="description" content="1. 跨域问题 在 Web 浏览器中，源（origin）是指 源 = 协议+域名+端口，可通过 js 的 window.origin 来获取，例如，在我的笔记静态网站中通过浏览器控制台执行该命令得到的结果是： 如果两个 url 的 协议名、域名、端口号完全一致，则称他们同源。 同源策略是指在 Web 浏览器规定，如果 js 运行在源 A 中，那么就只能...">
    <link rel="stylesheet" href="/assets/css/styles.27bf87a0.css">
    <link rel="preload" href="/assets/js/runtime~app.59330dc2.js" as="script"><link rel="preload" href="/assets/css/styles.27bf87a0.css" as="style"><link rel="preload" href="/assets/js/48912.3c1ac731.js" as="script"><link rel="preload" href="/assets/js/app.906eea05.js" as="script">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="https://figure-bed.chua-n.com/logo/荒流.png" alt><!----><span class="vp-site-name hide-in-pad">荒流的笔趣屋</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/" aria-label="随笔"><!--[--><span class="font-icon icon iconfont icon-leaf" style=""></span><!--]-->随笔<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Java"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span>Java<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/Java/" aria-label="Java"><!--[--><span class="font-icon icon iconfont icon-java" style=""></span><!--]-->Java<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/JavaWeb/" aria-label="JavaWeb"><!--[--><span class="font-icon icon iconfont icon-web" style=""></span><!--]-->JavaWeb<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/JavaScript/" aria-label="JavaScript"><!--[--><span class="font-icon icon iconfont icon-javascript" style=""></span><!--]-->JavaScript<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Python/" aria-label="Python"><!--[--><span class="font-icon icon iconfont icon-python" style=""></span><!--]-->Python<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E6%95%B0%E6%8D%AE%E5%BA%93/" aria-label="数据库"><!--[--><span class="font-icon icon iconfont icon-database" style=""></span><!--]-->数据库<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/Linux/" aria-label="Linux"><!--[--><span class="font-icon icon iconfont icon-linux" style=""></span><!--]-->Linux<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" aria-label="计算机网络"><!--[--><span class="font-icon icon iconfont icon-computer-network" style=""></span><!--]-->计算机网络<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/DSA/" aria-label="DSA"><!--[--><span class="font-icon icon iconfont icon-algorithm" style=""></span><!--]-->DSA<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E6%95%B0%E5%AD%A6/" aria-label="数学"><!--[--><span class="font-icon icon iconfont icon-math-pi" style=""></span><!--]-->数学<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/CV/" aria-label="CV"><!--[--><span class="font-icon icon iconfont icon-computer-vision-simple" style=""></span><!--]-->CV<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/%E6%9D%82%E6%8A%80/" aria-label="杂技"><!--[--><span class="font-icon icon iconfont icon-other-tech" style=""></span><!--]-->杂技<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/chua-n/chua-n.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">/</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-backend-dev" style=""></span><span class="vp-sidebar-title">Web后端基础</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-spring" style=""></span><span class="vp-sidebar-title">Spring</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-MVC" style=""></span><span class="vp-sidebar-title">SpringMVC</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-mybatis" style=""></span><span class="vp-sidebar-title">MyBatis</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-spring-boot" style=""></span><span class="vp-sidebar-title">SpringBoot</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-spring-cloud" style=""></span><span class="vp-sidebar-title">SpringCloud</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-spring-data" style=""></span><span class="vp-sidebar-title">SpringData</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-security-1" style=""></span><span class="vp-sidebar-title">SpringSecurity</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon iconfont icon-security" style=""></span><span class="vp-sidebar-title">Web安全</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon iconfont icon-other-tech" style=""></span><span class="vp-sidebar-title">其他</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/JavaWeb/%E5%85%B6%E4%BB%96/YAML%E6%A6%82%E8%BF%B0.html" aria-label="YAML概述"><!--[--><span class="font-icon icon iconfont icon-yaml" style=""></span><!--]-->YAML概述<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/JavaWeb/%E5%85%B6%E4%BB%96/Swagger.html" aria-label="Swagger"><!--[--><span class="font-icon icon iconfont icon-swagger" style=""></span><!--]-->Swagger<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/JavaWeb/%E5%85%B6%E4%BB%96/%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92.html" aria-label="前后端交互"><!--[--><span class="font-icon icon iconfont icon-interactive" style=""></span><!--]-->前后端交互<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/JavaWeb/%E5%85%B6%E4%BB%96/RESTful.html" aria-label="RESTful"><!--[--><span class="font-icon icon iconfont icon-restful" style=""></span><!--]-->RESTful<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon iconfont icon-interactive" style=""></span>前后端交互</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://chua-n.com" target="_blank" rel="noopener noreferrer">荒流</a></span><span property="author" content="荒流"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2021年10月30日</span><meta property="datePublished" content="2021-10-30T09:50:26.000Z"></span><!----><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 19 分钟</span><meta property="timeRequired" content="PT19M"></span><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 5799 字</span><meta property="wordCount" content="5799"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-跨域问题">1. 跨域问题</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-http-反向代理">2. HTTP 反向代理</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#所谓正向代理">所谓正向代理</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#为什么有代理存在">为什么有代理存在？</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#反向代理">反向代理</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#为什么要使用反向代理">为什么要使用反向代理？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-前端路由与后端路由">3. 前端路由与后端路由</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#从后端路由讲起">从后端路由讲起</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#后端路由与服务端渲染">后端路由与服务端渲染</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#过渡到前端路由">过渡到前端路由</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#前端路由与前端渲染">前端路由与前端渲染</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#hash-模式">Hash 模式</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level5" href="#history-模式">History 模式</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level4" href="#前端路由与服务端渲染">前端路由与服务端渲染</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#前后端分离">前后端分离</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h2 id="_1-跨域问题" tabindex="-1"><a class="header-anchor" href="#_1-跨域问题"><span>1. 跨域问题</span></a></h2><p>在 Web 浏览器中，<strong>源</strong>（origin）是指 <strong>源 = 协议+域名+端口</strong>，可通过 js 的 <code>window.origin</code> 来获取，例如，在我的笔记静态网站中通过浏览器控制台执行该命令得到的结果是：</p><div class="language-js line-numbers-mode" data-highlighter="shiki" data-ext="js" data-title="js" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> window</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">origin</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;http://localhost:7777&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果两个 url 的 协议名、域名、端口号完全一致，则称他们<strong>同源</strong>。</p><p><strong>同源策略</strong>是指在 Web 浏览器规定，如果 js 运行在源 A 中，那么就只能获得源 A 中的数据，不能获得源 B 中的数据，即不允许<strong>跨域</strong>。同源策略可防止某个网页上的恶意脚本通过该页面的文档对象模型访问另一网页上的敏感数据。</p><p>下表列出一些与 URL <a href="http://www.example.com/dir/page.html" target="_blank" rel="noopener noreferrer">http://www.example.com/dir/page.html</a> 是否属于同源的 URL 例子：</p><table><thead><tr><th style="text-align:center;">URL</th><th style="text-align:center;">是否同源</th><th style="text-align:center;">原因</th></tr></thead><tbody><tr><td style="text-align:center;"><a href="http://www.example.com/dir/page2.html" target="_blank" rel="noopener noreferrer">http://www.example.com/dir/page2.html</a></td><td style="text-align:center;">是</td><td style="text-align:center;">只有路径不同</td></tr><tr><td style="text-align:center;"><a href="http://www.example.com/dir2/other.html" target="_blank" rel="noopener noreferrer">http://www.example.com/dir2/other.html</a></td><td style="text-align:center;">是</td><td style="text-align:center;">只有路径不同</td></tr><tr><td style="text-align:center;"><a href="http://username:password@www.example.com/dir2/other.html" target="_blank" rel="noopener noreferrer">http://username:password@www.example.com/dir2/other.html</a></td><td style="text-align:center;">是</td><td style="text-align:center;">只有路径不同</td></tr><tr><td style="text-align:center;"><a href="http://www.example.com:81/dir/other.html" target="_blank" rel="noopener noreferrer">http://www.example.com:81/dir/other.html</a></td><td style="text-align:center;">否</td><td style="text-align:center;">不同端口（若未标明，http:// 默认端口号为 80）</td></tr><tr><td style="text-align:center;"><a href="https://www.example.com/dir/other.html" target="_blank" rel="noopener noreferrer">https://www.example.com/dir/other.html</a></td><td style="text-align:center;">否</td><td style="text-align:center;">不同协议（https 和 http）</td></tr><tr><td style="text-align:center;"><a href="http://en.example.com/dir/other.html" target="_blank" rel="noopener noreferrer">http://en.example.com/dir/other.html</a></td><td style="text-align:center;">否</td><td style="text-align:center;">不同域名</td></tr><tr><td style="text-align:center;"><a href="http://example.com/dir/other.html" target="_blank" rel="noopener noreferrer">http://example.com/dir/other.html</a></td><td style="text-align:center;">否</td><td style="text-align:center;">不同域名（需要完全匹配）</td></tr><tr><td style="text-align:center;"><a href="http://v2.www.example.com/dir/other.html" target="_blank" rel="noopener noreferrer">http://v2.www.example.com/dir/other.html</a></td><td style="text-align:center;">否</td><td style="text-align:center;">不同域名（需要完全匹配）</td></tr></tbody></table><p>同源策略对 Web 应用程序具有特殊意义，因为 Web 应用程序广泛依赖于 HTTP cookie 来维持用户会话，所以必须将不相关网站严格分隔，以防止数据泄露。</p><p>值得注意的是，<em>同源策略仅针对脚本</em>，这意味着某网站可以通过相应的 HTML 标签访问不同来源网站上的图像、CSS 和动态加载脚本等资源。而<em>跨站请求伪造</em>就是利用同源策略不适用于 HTML 标签的缺陷。</p><p>跨域的解决方案（分为前端和后端）：</p><ul><li>跨源资源共享（cross-origin resource sharing，CORS）定义了一种方式，为的是浏览器和服务器之间能互相确认是否足够安全以至于能使用跨源请求。相比纯粹的同源请求，CORS 更为自由和功能强大，同时比纯粹的跨域请求更为安全。跨域资源共享是一份浏览器技术的规范，提供了 Web 服务从不同网域传来沙盒脚本的方法，以避开浏览器的同源策略。</li><li>......</li></ul><h2 id="_2-http-反向代理" tabindex="-1"><a class="header-anchor" href="#_2-http-反向代理"><span>2. HTTP 反向代理</span></a></h2><blockquote><p>参考 <a href="https://juejin.cn/post/6958987684383555592" target="_blank" rel="noopener noreferrer">肖国栋的 i 自留地</a>。</p></blockquote><p>要理解什么是 <strong>反向代理（reverse proxy）</strong> ，自然你得先知道什么是 <strong>正向代理（forward proxy）</strong> 。</p><blockquote><p>另外需要说的是， 一般提到反向代理， 通常是指 HTTP 反向代理， 但反向代理的范围可以更大， 比如 tcp 反向代理，本文不讨论 HTTP 反向代理之外的东西。</p></blockquote><h3 id="所谓正向代理" tabindex="-1"><a class="header-anchor" href="#所谓正向代理"><span>所谓正向代理</span></a></h3><p>正向代理通常直接称为<strong>代理（proxy）</strong> ，无需强调它是正向的，在 HTTP 协议中，代理即指正向代理。</p><p>而要谈论什么是正向代理，则需要先讨论&quot;直接访问&quot;的形式，即没有任何代理的模式。事实上， 直接访问对于很多的小网站来说是最常见的方式，直接访问类似于&quot;厂家直销&quot;—— 你直接向生产厂家下单， 没有经过任何的中间商。从系统的角度看， &quot;直接访问&quot;就是浏览器的请求直接到了最终生成网页的服务器， 中间没有经过任何的 HTTP 代理服务器。</p><p>对于浏览器的请求处理来说，一个（正向）代理，更确切的说一台代理服务器，其并没有直接响应请求的能力，它不过是把请求转发到最终的网页服务器上，再把后者的响应再转发回请求者，也就是浏览器。 如下图所示：</p><figure><img src="https://figure-bed.chua-n.com/JavaWeb/其他/3.png" alt="forward proxy demo" tabindex="0" loading="lazy"><figcaption>forward proxy demo</figcaption></figure><p>但这里还有个问题——浏览器怎么知道代理服务器在哪？最终的服务器浏览器是知道的，比如对于域名 &quot;<a href="http://baidu.com" target="_blank" rel="noopener noreferrer">baidu.com</a>&quot;，通过 DNS 浏览器能查到对应的 ip 地址，但浏览器怎么知道哪里有代理服务器，以及请求是否要经过代理服务器呢？</p><p>答案是必须主动告诉浏览器，这个过程通常称为“配置代理服务器”，如在 IE 浏览器上配置代理服务器的操作如下：</p><img src="https://figure-bed.chua-n.com/JavaWeb/其他/4.png" style="zoom:67%;"><h3 id="为什么有代理存在" tabindex="-1"><a class="header-anchor" href="#为什么有代理存在"><span>为什么有代理存在？</span></a></h3><p>一是出于安全审计及控制方面的一些考虑。在一些组织内，web 相关的端口如 80 及 443 是被封禁的，在组织内上不了网，如果这时有上网的需求，就只能使用组织指定的内网的代理服务器了。</p><blockquote><p>当然了，代理服务器本身则没有被限制，它是可以访问外部的网络的。</p></blockquote><p>如此一来， 你的所有上网请求都要经过代理服务器， 而这个代理是由组织控制的， 就可以对请求进行审计了：</p><ul><li>比如发现你往外面的一个网站上传组织内部的保密资料， 就出手阻止你；</li><li>又或发现你访问了一个不安全的网站， 可能会导致你的电脑中毒， 于是出手拦截了；</li><li>又或者是发现你在访问与工作无关的娱乐网站， 于是就给你阻断了。</li></ul><p>二是有时出于加速或节省带宽等的考虑，因为有的代理服务器它不仅能转发，还能对网页以及其它一些资源进行缓存。举个例子，假如现在很多同学都要去上 <a href="http://qq.com" target="_blank" rel="noopener noreferrer">qq.com</a> 的主页，那么第一个同学请求时，代理服务器就可以把主页缓存起来一段时间，碰到后面还要同学想访问这个主页，就无需再去请求了，代理服务器直接返回缓存的请求。</p><blockquote><p>自然，缓存也会有一个失效期，不会一直缓存下去，否则内容就得不到更新了。至于多长时间更新缓存，怎么更新等这些就属于具体的缓存策略问题了。</p></blockquote><p>值得一提的是，现在很多网页主页都有个性化推荐，又或者直接就是要登录的，那通常就无法缓存了，所以现在配置代理服务器的行为现在也不那么时兴了，当然一个原因也可能是现在带宽也提高了。不过另一方面，很多静态资源还是可以缓存的，比如图片、js、css 之类的文件，所以用好了代理服务器依然还是可以发挥作用的。</p><h3 id="反向代理" tabindex="-1"><a class="header-anchor" href="#反向代理"><span>反向代理</span></a></h3><p>反向代理与正向代理的一个很大区别就是，它不需要客户端（浏览器）去做什么配置，并没有什么配置代理服务器的操作。 如果说正向代理是<strong>主动配置</strong>，主动走代理，那么反向代理则是<strong>被代理</strong>，从这点上看，反向代理有时又称为透明代理，也即是浏览器都不知道自己被代理了，浏览器以为发给它响应的就是最终的网页服务器，而其实不过是个代理。</p><p>类似于：</p><figure><img src="https://figure-bed.chua-n.com/JavaWeb/其他/5.png" alt="direct sale vs reverse proxy" tabindex="0" loading="lazy"><figcaption>direct sale vs reverse proxy</figcaption></figure><p>访问一些网站时，比如 <a href="http://chua-n.com" target="_blank" rel="noopener noreferrer">chua-n.com</a>，可以发现响应这个访问请求的是一台 Nginx server，如下图所示：</p><figure><img src="https://figure-bed.chua-n.com/JavaWeb/其他/11.png" alt="image-20240505210831260" tabindex="0" loading="lazy"><figcaption>image-20240505210831260</figcaption></figure><p>问题在于 Nginx 并非最终生成这个网页的 server ，如果你了解 Nginx，就会知道它通常只是一个静态资源服务器，而相应的网页是一个动态生成的内容，从 Nginx 那里取得最终响应的内容，并再次转发给浏览器，整个情形如下：</p><figure><img src="https://figure-bed.chua-n.com/JavaWeb/其他/6.png" alt="nginx reverse proxy demo" tabindex="0" loading="lazy"><figcaption>nginx reverse proxy demo</figcaption></figure><p>这是内部配置的一个情况：</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">location ~ \.php$ {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    root           /ftp/wwwroot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fastcgi_pass   127.0.0.1:9000;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fastcgi_index  index.php;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    fastcgi_param  SCRIPT_FILENAME  $document_root/$fastcgi_script_name;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    include        fastcgi_params;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请求被转发到内部一个在 9000 端口上监听的 php 应用服务器。从外部浏览器的角度看，请求直接发给了 Nginx server，响应也从 Nginx server 里回来了，中间没有任何的（正向）代理。至于说你内部请求又被怎么转发了，显然浏览器既无从知道也不需要知道。</p><p>在整个体系里面，Nginx 的角色就是一个反向代理服务器，浏览器被代理了，但它无从知道自己是否被代理了，这一切对它而言是透明的，反正它自己是没有主动走代理的。</p><p>值得额外一提的是，通过上述你已经知道了该网站内部的配置，此时如果直接访问 <a href="http://chua-n.com:9000" target="_blank" rel="noopener noreferrer">chua-n.com:9000</a>，那便是真正的“直接访问”了，就绕过了 Nginx。不过嘛，通过而言直接访问是访问不通的，因为 9000 端口并没有对外放开，只是在内部可以访问。</p><h3 id="为什么要使用反向代理" tabindex="-1"><a class="header-anchor" href="#为什么要使用反向代理"><span>为什么要使用反向代理？</span></a></h3><p>一个很直接的原因就是反向代理可以作为内部<strong>负载均衡</strong>（load balance）的手段：</p><figure><img src="https://figure-bed.chua-n.com/JavaWeb/其他/7.png" alt="nginx tomcat load balance" tabindex="0" loading="lazy"><figcaption>nginx tomcat load balance</figcaption></figure><p>如果你在云上有好几台主机，甚至还可以将其组成一个内网，然后将 tomcat 部署在不同的主机上。比如有三台主机的话，一台运行 Nginx 监听 80 端口，其余两台运行 tomcat，分别监听 8080 和 8081 端口，同时接受并处理 Nginx 反向代理过来的请求，如下图所示：</p><figure><img src="https://figure-bed.chua-n.com/JavaWeb/其他/8.png" alt="nginx tomcat load balance multi hosts" tabindex="0" loading="lazy"><figcaption>nginx tomcat load balance multi hosts</figcaption></figure><p>如果两台 tomcat 主机的配置不同，比如一台的性能更强劲些，还可以调整负载的比例（即权重，weight），让性能更强的一台承担更多的请求：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">http {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    upstream myapp1 {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        server 192.168.0.20:8080 weight=3;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        server 192.168.0.21:8080 weight=2;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    server {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        listen 80;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        location / {</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            proxy_pass http://myapp1;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>如上配置 3:2 的权重比，让其中一台承担 60% 的请求，而另一台性能较差的则承担 40%，也即每 5 个请求，3 个会被转到 ip 为 20 的主机上，2 个会转到 ip 为 21 的主机上。</p></blockquote><p>自然，有人可能会有疑问，所有请求都还是要经过 Nginx，它能处理得过来吗？答案是可以的，因为它的功能仅仅是转发，这就有点像美团外卖，虽然它每天接受成千上万的人的点餐，但它自己不需要去买菜、洗菜、切菜、炒菜等，它仅仅需要把订单交给饭店餐馆，然后把它们做好的饭菜配送出去，也即那些耗时的做饭过程都交给了饭店餐馆处理。</p><p>在这种反向代理的模式中，同样的，生成网页这个重任交到了隐藏在背后的 tomcat，生成一个复杂的动态网页可能需要经过一些复杂的计算，要查询数据库，要拼凑各个页面组件，可能会比较耗时，但这些请求被两个 tomcat 应用并发地处理了，因此响应的速度还是得到了保证，而这些就是反向代理带来的好处。</p><h2 id="_3-前端路由与后端路由" tabindex="-1"><a class="header-anchor" href="#_3-前端路由与后端路由"><span>3. 前端路由与后端路由</span></a></h2><blockquote><p>参考 <a href="https://www.cnblogs.com/songyao666/p/11470030.html" target="_blank" rel="noopener noreferrer">前端南玖 - 博客园 </a>。</p></blockquote><h3 id="从后端路由讲起" tabindex="-1"><a class="header-anchor" href="#从后端路由讲起"><span>从后端路由讲起</span></a></h3><p>在 web 开发早期的「刀耕火种」年代里，一直是后端路由占据主导地位。不管是 php，还是 jsp、asp，用户能通过 URL 访问到的页面，大多是通过后端路由匹配之后再返回给浏览器的。经典面试题，「你从浏览器地址栏里输入<code>www.baidu.com</code>到你看到网页这个过程中经历了什么」其实讲的也是这个道理。</p><figure><img src="https://figure-bed.chua-n.com/JavaWeb/其他/9.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>在 web 后端，不管是什么语言的后端框架，都会有一个专门开辟出来的路由模块或者路由区域，用来匹配用户给出的 URL 地址，以及一些表单提交、ajax 请求的地址。通常遇到无法匹配的路由，后端将会返回一个<code>404</code>状态码。</p><h4 id="后端路由与服务端渲染" tabindex="-1"><a class="header-anchor" href="#后端路由与服务端渲染"><span>后端路由与服务端渲染</span></a></h4><p>前面说了，「刀耕火种」的年代里，网页通常是通过后端路由直出给客户端浏览器的。也就是网页的 html 一般是在后端服务器里通过模板引擎渲染好再交给前端的。至于一些其他的效果，是通过预先写在页面里的 jQuery、Bootstrap 等常见的前端框架去负责的。</p><p>如果你说有些网站已经是通过 ajax 去实现的页面，比如 gmail，比如 qq 邮箱。那么你要注意到哪怕是这些页面，它们页面的「龙骨」也并非是全部通过 ajax 去实现的，依然还是后端直出——这也就是我们现在又老生常谈的服务端渲染。</p><p>服务端渲染的好处有很多，比如对于 SEO 友好，一些对安全性要求高的页面采用服务端渲染是更保险的。而在当时还没有 node.js 的年代，为了良好地构建前端页面，都是通过服务端语言对应的模板引擎来实现动态网页、页面结构的组织、组件的复用。比如 Laravel 的 blade，用在 Django 上的 jinja2，用在 Struts 的 jsp 等等。实际上到如今，一门后端语言想要能实现自己的 web 功能，都需要有自己对应的模板引擎。</p><p>node.js 诞生之后，前端拥有自己的后端渲染的模板引擎也成为了现实。常见的比如 pug、ejs、nunjucks 等。这些模板引擎搭配 Express、Koa 等后端框架也在一开始风靡一时。</p><p>不过在这个过程中，随着 web 应用的开发越来越复杂，单纯服务端渲染的问题开始慢慢的暴露出来了——耦合性太强了，jQuery 时代的页面不好维护，页面切换白屏严重等等。耦合性问题虽然能通过良好的代码结构、规范来解决，不过 jQuery 时代的页面不好维护这是有目共睹的，全局变量满天飞，代码入侵性太高。后续的维护通常是在给前面的代码打补丁。而页面切换的白屏问题虽然可以通过 ajax、或者 iframe 等来解决，但是在实现上就麻烦了——进一步增加了可维护的难度。</p><p>于是，我们开始进入了前端路由的时代。</p><h3 id="过渡到前端路由" tabindex="-1"><a class="header-anchor" href="#过渡到前端路由"><span>过渡到前端路由</span></a></h3><p>前端路由——顾名思义，页面跳转的 URL 规则匹配由前端来控制。而前端路由主要是有两种显示方式：</p><ul><li>带有 hash 的前端路由，优点是兼容性高。缺点是 URL 带有<code>#</code>号不好看</li><li>不带 hash 的前端路由，优点是 URL 不带<code>#</code>号，好看。缺点是既需要浏览器支持也需要后端服务器支持</li></ul><p>前端路由应用最广泛的例子就是当今的 SPA 的 web 项目。</p><p>不管是 Vue、React 还是 Angular 的页面工程，都离不开相应配套的 router 工具。前端路由带来的最明显的好处就是，地址栏 URL 的跳转不会白屏了——这也得益于前端渲染带来的好处。</p><h4 id="前端路由与前端渲染" tabindex="-1"><a class="header-anchor" href="#前端路由与前端渲染"><span>前端路由与前端渲染</span></a></h4><p>讲前端路由就不能不说前端渲染。以 Vue 项目为例，如果你是用官方的<code>vue-cli</code>搭配 webpack 模板构建的项目，你有没有想过你的浏览器拿到的 html 是什么样的？是你页面长的那样有<code>button</code>有<code>form</code>的样子么？我想不是的。在生产模式下，你看看构建出来的<code>index.html</code>长什么样：</p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" data-title="html" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;!</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DOCTYPE</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> lang</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;en&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">head</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">meta</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> charset</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;UTF-8&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;Vue&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">title</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">head</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;app&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">div</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;text/javascript&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> src</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;xxxx.xxx.js&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;text/javascript&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> src</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;yyyy.yyy.js&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;text/javascript&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> src</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;zzzz.zzz.js&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">script</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">body</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">html</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通常长上面这个样子。可以看到，这个其实就是你的浏览器从服务端拿到的 html。这里面空荡荡的只有一个<code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>这个入口的 div 以及下面配套的一系列 js 文件。所以你看到的页面其实是通过那些 js 渲染出来的。这也是我们常说的<strong>前端渲染</strong>。</p><figure><img src="https://figure-bed.chua-n.com/JavaWeb/其他/10.jpg" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>前端渲染把渲染的任务交给了浏览器，通过客户端的算力来解决页面的构建，这个很大程度上缓解了服务端的压力。而且配合前端路由，无缝的页面切换体验自然是对用户友好的。不过带来的坏处就是对 SEO 不友好，毕竟搜索引擎的爬虫只能爬到上面那样的 html，对浏览器的版本也会有相应的要求。</p><p>需要明确的是，只要在浏览器地址栏输入 URL 再回车，是一定会去后端服务器请求一次的。而如果是在页面里通过点击按钮等操作，利用 router 库的 api 来进行的 URL 更新是不会去后端服务器请求的。</p><h5 id="hash-模式" tabindex="-1"><a class="header-anchor" href="#hash-模式"><span>Hash 模式</span></a></h5><p>hash 模式利用的是浏览器不会对<code>#</code>号后面的路径对服务端发起路由请求。也即在浏览器里输入如下这两个地址：<code>http://localhost/#/user/1</code>和<code>http://localhost/</code>其实到服务端都是去请求<code>http://localhost</code>这个页面的内容。</p><p>而前端的 router 库通过捕捉<code>#</code>号后面的参数、地址，来告诉前端库（比如 Vue）渲染对应的页面。这样，不管是我们在浏览器的地址栏输入，或者是页面里通过 router 的 api 进行的跳转，都是一样的跳转逻辑。所以这个模式是不需要后端配置其他逻辑的，只要给前端返回<code>http://localhost</code>对应的 html，剩下具体是哪个页面，就由前端路由去判断便可。</p><h5 id="history-模式" tabindex="-1"><a class="header-anchor" href="#history-模式"><span>History 模式</span></a></h5><p>不带<code>#</code>号的路由，也就是我们通常能见到的 URL 形式。router 库要实现这个功能一般都是通过 HTML5 提供的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History_API" target="_blank" rel="noopener noreferrer">history</a> 这个 api。比如<code>history.pushState()</code>可以向浏览器地址栏 push 一个 URL，而这个 URL 是不会向后端发起请求的！通过这个特性，便能很方便地实现漂亮的 URL。不过需要注意的是，这个 api 对于 IE9 及其以下版本浏览器是不支持的，IE10 开始支持，所以对于浏览器版本是有要求的。vue-router 会检测浏览器版本，当无法启用 history 模式的时候会自动降级为 hash 模式。</p><p>上面说了，你在页面里的跳转，通常是通过 router 的 api 去进行的跳转，router 的 api 调用的通常是<code>history.pushState()</code>这个 api，所以跟后端没什么关系。但是一旦你从浏览器地址栏里输入一个地址，比如<code>http://localhost/user/1</code>, 这个 URL 是会向后端发起一个 get 请求的。后端路由表里如果没有配置相应的路由，那么自然就会返回一个 404 了！这也就是很多朋友在生产模式遇到 404 页面的原因。</p><p>那么很多人会问了，那为什么我在开发模式下没问题呢？那是因为<code>vue-cli</code>在开发模式下帮你启动的那个<code>express</code>开发服务器帮你做了这方面的配置。理论上在开发模式下本来也是需要配置服务端的，只不过<code>vue-cli</code>都帮你配置好了，所以你就不用手动配置了。</p><p>那么该如何配置呢？其实在生产模式下配置也很简单，参考 vue-router 给出的 <a href="https://router.vuejs.org/zh-cn/essentials/history-mode.html" target="_blank" rel="noopener noreferrer">配置例子</a>。一个原则就是，在所有后端路由规则的最后，配置一个规则，如果前面其他路由规则都不匹配的情况下，就执行这个规则——把构建好的那个<code>index.html</code>返回给前端。这样就解决了后端路由抛出的 404 的问题了，因为只要你输入了<code>http://localhost/user/1</code>这地址，那么由于后端其他路由都不匹配，那么就会返回给浏览器<code>index.html</code>。</p><p>浏览器拿到这个 html 之后，router 库就开始工作，开始获取地址栏的 URL 信息，然后再告诉前端库（比如 Vue）渲染对应的页面。到这一步就跟 hash 模式是类似的了。</p><p>当然，由于后端无法抛出 404 的页面错误，404 的 URL 规则自然是交给前端路由来决定了。你可以自己在前端路由里决定什么 URL 都不匹配的 404 页面应该显示什么。</p><h4 id="前端路由与服务端渲染" tabindex="-1"><a class="header-anchor" href="#前端路由与服务端渲染"><span>前端路由与服务端渲染</span></a></h4><p>虽然前端渲染有诸多好处，不过 SEO 的问题，还是比较突出的。所以 react、vue 等框架在后来也在服务端渲染上做着自己的努力。基于前端库的服务端渲染跟以前基于后端语言的服务端渲染又有所不同。前端框架的服务端渲染大多依然采用的是前端路由，并且由于引入了状态统一、vnode 等等概念，它们的服务端渲染对服务器的性能要求比 php 等语言基于的字符串填充的模板引擎渲染对于服务器的性能要求高得多。所以在这方面不仅是框架本身在不断改进算法、优化，服务端的性能也必须要有所提升。当初掘金换成 SSR 的时候也遇到了对应的性能问题，就是这个原因。</p><p>当然在二者之间，也出现了预渲染的概念。也即先在服务端构建出一部分静态的 html 文件，用于直出浏览器。然后剩下的页面再通过常用的前端渲染来实现。通常我们可以把首页采用预渲染的方式。这个的好处是明显的，兼顾了 SEO 和服务器的性能要求。不过它无法做到全站 SEO，生产构建阶段耗时也会有所提高，这也是遗憾所在。</p><p>关于预渲染，可以考虑使用 <a href="https://github.com/chrisvfritz/prerender-spa-plugin" target="_blank" rel="noopener noreferrer">prerender-spa-plugin</a> 这个 webapck 的插件，它的 3.x 版本开始使用 puppeteer 来构建 html 文件了。</p><h3 id="前后端分离" tabindex="-1"><a class="header-anchor" href="#前后端分离"><span>前后端分离</span></a></h3><p>得益于前端路由和现代前端框架的完整的前后端渲染能力，跟页面渲染、组织、组件相关的东西，后端终于可以不用再参与了。</p><p>前后端分离的开发模式也逐渐开始普及。前端开始更加注重页面开发的工程化、自动化，而后端则更专注于 api 的提供和数据库的保障。代码层面上耦合度也进一步降低，分工也更加明确。我们也摆脱了当初「刀耕火种」的 web 开发年代。撒花~</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/chua-n/chua-n.github.io/edit/main/book/JavaWeb/其他/前后端交互.md" aria-label="编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2024/5/5 13:18:29</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: chua_n@yeah.net">chua-n</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/JavaWeb/%E5%85%B6%E4%BB%96/Swagger.html" aria-label="Swagger"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><span class="font-icon icon iconfont icon-swagger" style=""></span>Swagger</div></a><a class="route-link auto-link next" href="/JavaWeb/%E5%85%B6%E4%BB%96/RESTful.html" aria-label="RESTful"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">RESTful<span class="font-icon icon iconfont icon-restful" style=""></span></div></a></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">应无所住，而生其心</div><div class="vp-copyright">Copyright © 2024 荒流 </div></footer></div><!--]--><!--[--><!----><div id="pwa-install"><!----><div id="install-modal-wrapper" style="display:none;"><div class="background"></div><div class="install-modal"><div class="header"><button type="button" class="close-button" aria-label="关闭"><svg xmlns="http://www.w3.org/2000/svg" class="icon close-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="close icon"><path d="M589.654 511.965 1007.212 84.22a49.777 49.777 0 0 0-.73-70.02 49.046 49.046 0 0 0-69.687.665L519.967 441.946 85.882 14.2a49.08 49.08 0 0 0-69.687.664 49.777 49.777 0 0 0 .664 70.019l433.454 427.082L16.859 939.048a49.777 49.777 0 0 0-.664 70.019 49.013 49.013 0 0 0 69.687.663l434.085-427.746 416.828 427.083A49.013 49.013 0 0 0 972.037 1024a48.416 48.416 0 0 0 34.512-14.27 49.777 49.777 0 0 0 .73-70.019z"></path></svg></button><div class="logo"><!----><div class="title"><h1></h1><p class="desc">该应用可以安装在你的 PC 或移动设备上。这将使该 Web 应用程序外观和行为与其他应用程序相同。它将在出现在应用程序列表中，并可以固定到主屏幕，开始菜单或任务栏。此 Web 应用程序还将能够与其他应用程序和你的操作系统安全地进行交互。</p></div></div></div><div class="content"><div class="highlight"><!----><!----></div><div class="description"><h3>详情</h3><p></p></div></div><div class="button-wrapper"><button type="button" class="install-button">安装<span></span></button><button type="button" class="cancel-button">取消</button></div></div></div></div><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.59330dc2.js" defer></script><script src="/assets/js/48912.3c1ac731.js" defer></script><script src="/assets/js/app.906eea05.js" defer></script>
  </body>
</html>
