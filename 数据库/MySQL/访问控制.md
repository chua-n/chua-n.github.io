**访问控制**——给用户提供且仅提供他们需要的访问权

管理访问控制需要创建和管理**用户账号**

**名为root的账号**对整个MySQL服务器具有**完全控制权**。在日常工作中，决不能使用root，应该创建一系列特定功能的账号。

MySQL用户账号和信息存储在名为**mysql**的MySQL数据库中，mysql数据库有一个名为**user**的表，它包含所有用户账号。可如下访问：

```sql
USE mysql;
SELECT user FROM user;
```

相关操作：

- CREATE USER

    ```sql
    CREATE USER ben IDENTIFIED BY 'p@$$wOrd';
    ```

    - 创建用户账号（创建时可以指定口令，也可以不指定）
    - IDENTIFIED BY指定的口令为纯文本，MySQL将在保存到user表之前对其进行加密
    - 为了作为散列值指定口令，使用IDENTIFIED BY PASSWORD
    - GRANT语句也可以创建用户账号，不过没有CREATE USER清楚直接
    - 可以通过INSERT直接插入行到user表来增加用户，不过这样不安全

- RENAME USER

    重命名账号：

    ```sql
    RENAME USER ben TO bforta;
    ```

- DROP USER

    删除账号：

    ```sql
    DROP USER bforta;
    ```

- GRANT/REVOKE

    - GRANT为授予权限，要求至少给出以下信息：
        - 要授予的权限（左为SELECT权限）
        - 被授予的访问权限的数据库或表（左为crashcourse数据库的所有表）
        - 用户名
        
        ```sql
        GRANT SELECT ON crashcourse.* TO bforta;
        ```
        
    - REVOKE为GTANT的反操作，用来撤销权限

        ```sql
        REVOKE SELECT ON crashcourse.* FROM bforta;
        ```

- SHOW GTANTS FOR

    - 显示用户权限：
        1. USAGE表示根本没有权限
        2. 新创建的用户没有访问权限
        3. MySQL的权限用用户名和主机名结合定义，即user@host。如果不指定主机名，则使用默认的主机名%（授予用户访问权限而不管主机名）

    ```sql
    SHOW GRANTS FOR bforta;
    /*
    +--------------------------------------+
    |  Grants for bforta@%                 |
    +--------------------------------------+
    |  GRANT USAGE ON *.* TO 'bforta'@'%'  |
    +--------------------------------------+
    */
    
    SHOW GRANTS FOR bforta;
    /*
    +----------------------------------------------------+
    |  Grants for bforta@%                               |
    +----------------------------------------------------+
    |  GRANT USAGE ON *.* TO 'bforta'@'%'                |
    |  GRANT SELECT ON 'crashcourse'.* TO 'beforta'@'%'  |
    +----------------------------------------------------+
    */
    ```

    

- SET PASSWORD

    - 更改口令。

        ```sql
        SET PASSWORD FOR bforta = Password('n3w p@$$wOrd');
        ```

    - 在不给定用户名时，其更新当前登录用户的口令。

        ```sql
        SET PASSWORD = Password('n3w p@$$wOrd');
        ```

权限说明：

![](https://chua-n.gitee.io/blog-images/notebooks/数据库/14..png)

![](https://chua-n.gitee.io/blog-images/notebooks/数据库/15.png)

