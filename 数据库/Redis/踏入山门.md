## 简介

Redis 是完全开源的，遵守 BSD 协议，是一个高性能的 key-value 数据库。键值存储的本质就是使用 key 来标识 value，当想要检索 value 时，必须使用与 value 相对应的 key 进行查找。

Redis 与其他 key - value 缓存产品有以下三个特点：

- Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用；
- Redis的key-value存储支持丰富的数据类型，包括string, list，set，zset，hash等；
- Redis支持数据的主从（master-slave）同步。

与 SQL 型数据库截然不同，Redis 没有提供新建数据库的操作，因为它自带了 16 （0—15）个数据库（默认使用 0 库）。在同一个库中，key 是唯一存在的、不允许重复的，它就像一把“密钥”，只能打开一把“锁”。

Redis 数据库没有“表”的概念，它通过不同的数据类型来实现存储数据的需求，不同的数据类型能够适应不同的应用场景，从而满足开发者的需求。

Redis 基于内存来实现数据的存储，因此其速度非常快。但是我们知道，计算机的内存是非常珍贵的资源，所以 Redis 不适合存储较大的文件或者二进制数据，否则会出现错误，Redis 适合存储较小的文本信息。理论上 Redis 的每个 key、value 的大小不超过 512 MB。

## Redis架构

Redis体系架构主要分为两个部分：

- Redis服务端
- Redis客户端

客户端和服务端可以位于同一台计算机上，也可以位于不同的计算机上。服务端是整个架构的“大脑”，能够把数据存储到内存中，并且起到管理数据的作用。

## Redis优势

下面对 Redis 的优势进行了简单总结：

- 性能极高：Redis 基于内存实现数据存储，它的读取速度是 110000次/s，写速度是 81000次/s；
- 多用途工具：Redis 有很多的用途，比如可以用作缓存、消息队列、搭建 Redis 集群等；
- 命令提示功能：Redis 客户端拥有强大的命令提示功能，使用起来非常的方便，降低了学习门槛；
- 可移植性：Redis 使用用标准 C语言编写的，能够在大多数操作系统上运行，比如 Linux，Mac，Solaris 等。

## Redis应用场景

Redis 用来缓存一些经常被访问的热点数据、或者需要耗费大量资源的内容，通过把这些内容放到 Redis 中，可以让应用程序快速地读取它们。

例如，网站的首页需要经常被访问，并且在创建首页的过程中会消耗的较多的资源，此时就可以使用 Redis 将整个首页缓存起来，从而降低网站的压力，减少页面访问的延迟时间。

我们知道，数据库的存储方式大体可分为两大类，基于磁盘存储和基于内存存储。

- 磁盘存储的数据库，因为磁头机械运动以及系统调用等因素导致读写效率较低。

- Redis 基于内存来实现数据存取，相对于磁盘来说，其读写速度要高出好几个数量级。

  | 名称      | 类型                             | 数据存储选项                                                 | 附加功能                               |
  | --------- | -------------------------------- | ------------------------------------------------------------ | -------------------------------------- |
  | Memcached | 基于内存存储的键值缓存型数据库   | 键值之间的映射                                               | 为提升性能构建了多线程服务器           |
  | Redis     | 基于内存存储的键值非关系型数据库 | 字符串、列表、散列、有序集合、无序集合                       | 发布与订阅、主从复制、持久化存储等     |
  | MySQL     | 基于磁盘的关系型数据库           | 每个数据库可以包含多个表，每个表可以包含多条记录； 支持第三方扩展。 | 支持 ACID 性质、主从复制和主主复制     |
  | MongoDB   | 基于磁盘存储的非关系文档型数据库 | 每个数据库可以包含多个集合，每个集合可以插入多个文档         | 支持聚合操作、主从复制、分片和空间索引 |

## Redis IO多路复用

> “多路”指的是多个网络连接，“复用”指的是复用同一个线程。多路 IO 复用技术可以让单个线程高效的处理多个连接请求。

Redis 的底层是一个单线程模型，单线程指的是使用一个线程来处理所有的网络事件请求，这样就避免了多进程或者多线程切换导致的 CPU 消耗，而且也不用考虑各种锁的问题。

Redis 为了充分利用单线程，加快服务器的处理速度，它采用 IO 多路复用模型来处理客户端与服务端的连接，这种模型有三种实现方式，分别是：

- select
- poll
- epoll

Redis 正是采用 epoll 的方式来监控多个 IO 事件。当客户端空闲时，线程处于阻塞状态；当一个或多个 IO 事件触发时（客户端发起网路连接请求），线程就会从阻塞状态唤醒，并同时使用`epoll`来轮询触发事件，并依次提交给线程处理。
