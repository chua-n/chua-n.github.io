## 1. 关于进程

在 LINUX 系统中，有 5 种常见的**进程状态**，分别为运行、中断、不可中断、僵死、停止，其各自的含义如下：

<img src="https://chua-n.gitee.io/blog-images/notebooks/杂技/Linux/12.png" style="zoom:67%;" />

1. R（运行）——进程正在运行或在运行队列中等待
2. S（中断）——进程处于休眠中，当某个条件形成后或者接收到信号时，则脱离该状态
3. D（不可中断）——进程不响应系统异步信号，即使用 kill 命令也不能将其中断
4. Z（僵死）——进程已经终止，但进程描述符依然存在，直到父进程调用 wait4()系统函数后将进程释放
5. T（停止）——进程收到停止信号后停止运行

如果我们在系统终端中执行一个命令后想立即停止它，可以同时按下$Ctrl+C$组合键，这将立即终止该命令的进程。

在执行命令时在末尾添加一个`&`符号，可使得命令进入系统**后台**来执行。

## 2. 进程管理

Linux 系统管理的要点在于定义究竟什么程度才算是高负载。

进程通常拥有这样一些信息：

| 编码  |                信息                |
| :---: | :--------------------------------: |
|  UID  |         启动这些进程的用户         |
|  PID  | 进程 ID（每个进程的 PID 是唯一的） |
| PPID  |            父进程的 PID            |
| STIME |        进程启动时的系统时间        |
|  TTY  |        进程启动时的终端设备        |
| TIME  |    运行进程需要的累计 CPU 时间     |
|  CMD  |           启动的程序名称           |
|  PRI  |            进程的优先级            |
| ADDR  |           进程的内存地址           |
|   C   |    进程生命周期中的 CPU 利用率     |
|   S   |             进程的状态             |

ps 命令：

-   ps 命令好比监测进程工具中的瑞士军刀，它能输出运行的系统上的所有程序的许多信息，然而 ps 命令极其复杂，拥有众多参数，在实际中大多数 LINUX 管理员都习惯有自己的一组固定参数。

-   Linux 系统中使用的 GNU ps 命令支持 3 种不同类型的命令行参数：

    1. Unix 风格的参数，前面加单破折线

    2. BSD 风格的参数，前面不加破折线

    3. GNU 风格的长参数，前面加双破折线

top 命令：

-   top 命令的输出中将进程叫做任务(task)。
-   top 命令默认会按照%CPU 值对进程进行排序。
-   top 命令中的平均负载有 3 个值：最近 1 分钟的、最近 5 分钟的、最近 15 分钟的平均负载。值越大说明系统的负载越高。由于进程短期的突发性活动，出现最近 1 分钟的高负载值很常见，但如果近 15 分钟内的平均负载都很高，就说明系统可能有问题。

killall 中的进程名支持通配符操作，如`killall http*`结合了所有以 http 开头的进程。

进程管理的相关命令：

-   `ps`：查看系统中进程状态，`ps <option>`

    | 参数     | 作用                                               |
    | -------- | -------------------------------------------------- |
    | -a       | 显示除 session leader 和无终端进程外的所有进程     |
    | -e       | 显示所有进程                                       |
    | -f       | 显示完整格式的输出                                 |
    | -U       | 显示属主的用户 ID 在 userlist 中的进程             |
    | -x       | 显示没有控制终端的进程                             |
    | --forest | GNU 长参数中一个令人喜爱的功能，显示进程的层级信息 |

-   `top`：动态地监视进程活动与系统负载等信息。op 命令非常强大，可将它看作 Linux 中的"强化版的 Windows 任务管理器"。

    ```bash
    # 动态监视某些进程
    top -p PID_1, PID_2, …, PID_n
    ```

-   `jobs`：显示所有用户在后台中运行的进程，`jobs <option>`

    | option | function     |
    | ------ | ------------ |
    | -l     | 显示更多信息 |

-   `free`：显示当前系统中内存的使用量信息，`free <-h>`

    <img src="https://chua-n.gitee.io/blog-images/notebooks/杂技/Linux/13.png" style="zoom:67%;" />

-   `uptime`：查看系统的负载信息。

    > 平均负载指的是系统在最近 1 分钟、5 分钟、15 分钟内的压力情况

-   `kill`：终止某个指定 PID 的服务进程，`kill <option> PID`

-   `killall`：终止某个指定名称的服务所对应的全部进程，`killall <option> process_name`

-   `pidof`：查询某个服务进程的 PID，`pidof <option> process_name`

-   `&`：后台模式，命令末尾加上&让进程进入后台模式

## 3. GPU

NVIDIA 相关：

| 命令                                                         | 作用                 |
| ------------------------------------------------------------ | -------------------- |
| `lspci\|grep -i nvidia`                                      | 查询所有 nvidia 显卡 |
| `lspci -v -s <显卡编号>`                                     | 查看显卡具体属性     |
| `nvidia-smi`                                                 | 查看显卡的显存利用率 |
| `cat /proc/driver/nvidia/version sudo dpkg --list \| grep nvidia-\*` | 查看显卡驱动版本     |
| `cat /usr/local/cuda/version.txt nvcc -v`                    | 查看 cuda 版本       |
