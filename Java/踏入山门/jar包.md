<font size="5">**JAR 文件**</font>的全称为 Java Archive File，意思为 Java 档案文件。

通常 jar 文件是一种压缩文件，与常见的 ZIP 压缩文件兼容，通常也被称为<font size="5"> **jar 包**</font>。jar 文件与 ZIP 文件的区别就是在 JAR 文件中默认包含了一个名为 META-INF/MANIFEST.MF 的清单文件，这个清单文件是在生成 jar 文件时由系统自动创建的。

把一个 jar 文件添加到系统的 CLASSPATH 环境变量中后，JVM 就可以自动在内存中解压这个 JAR 包。Java 会把这个 jar 文件当成一个路径来处理，在其中查询所需要的类或包层次对应的路径结构。

使用 JAR 文件有以下好处：

1. 安全：能够对 JAR 文件进行数字签名，只让能够识别数字签名的用户使用里面的东西；
2. 加快下载速度：在网上使用 Applet 时，如果存在多个文件而不打包，为了能够把每个文件都下载到客户端，需要为每个文件单独建立一个 HTTP 连接，这是非常耗时的工作。将这些文件压缩成一个 JAR 包，只要建立一次 HTTP 连接就能够一次下载所有的文件。
3. 压缩：使文件变小，JAR 的压缩机制和 ZIP 完全相同；
4. 包封装：能够让 JAR 包里面的文件依赖于统一版本的类文件；
5. 可移值性：JAR 包作为内嵌在 Java 平台内部处理的标准，能够在各种平台上直接使用。

当一个应用程序开发成功后，大致有如下三种发布方式：

1. 使用平台相关的编译器将整个应用编译成平台相关的可执行性文件；

2. 为应用编辑一个批处理文件；

3. 将一个应用程序制作成可执行的 jar 包，通过 jar 包来发布应用程序：

    - 如果开发者把整个应用制作成一个可执行的 jar 包交给用户，那么用户使用起来就方便了。在 Windows 下安装 JRE 时，安装文件会将*.jar 文件映射成由 javaw.exe 打开，对于一个可执行的 jar 包，用户只需要双击它就可以运行程序了，和阅读*.chm 文档一样方便（\*.chm 文档默认是由 hh.exe 打开的）。

    - 创建可执行的 jar 包的关键在于：让 javaw 命令知道 jar 包中哪个类是主类，javaw 命令可以通过运行该主类来运行程序。

    - jar 命令有-e 选项即可指定 jar 包中作为程序入口的主类的类名，故而制作一个可执行的 jar 包只要增加-e 选项即可：

        ```
        // test.Test是完整类名
        jar cvfe test.jar test.Test test
        ```

    - 运行 jar 包有两种方式：

        - 使用 java 命令：`java -jar test.jar`
        - 使用 javaw 命令：`javaw test.jar`


## jar 命令

JAR 文件通常使用 jar 命令压缩而成，当使用 jar 命令压缩生成 jar 文件时，可以把一个或多个路径全部压缩成一个 JAR 文件。jar 是随 JDK 自动安装的，在 JDK 安装目录下的 bin 目录中，Windows 下文件名为 jar.exe，Linux 下文件名为 jar。

<img src="https://chua-n.gitee.io/figure-bed/notebook/Java/22.png" alt="22" style="zoom:80%;" />

<img src="https://chua-n.gitee.io/figure-bed/notebook/Java/23.png" alt="23" style="zoom:80%;" />

语法：通常 jar 命令的格式为`jar options file1, file2…`

jar 命令参数

| 选项 | 说明                                                                                                                                                                |
| ---- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| c    | 创建一个新的或者空的存档文件并加入文件。若指定的文件名是目录，jar 程序将会对它们进行递归处理                                                                        |
| C    | 暂时改变目录，如 jar cvf jarFileName.jar -C classes \*.class 改变 classes 子目录，以便增加这些类文件                                                                |
| e    | 在清单文件中创建一个条目                                                                                                                                            |
| f    | 将 jar 文件名指定为第二个命令行参数。如果没有这个参数，jar 命令会将结果写到标准输出上（在创建 jar 文件时），或者从标准输入中读取它（在解压或者列出 jar 文件内容时） |
| i    | 建立索引文件，用于加快对大型归档的查找                                                                                                                              |
| m    | 将一个清单文件（manifest）添加到 jar 文件中，清单是对存档内容和来源的说明。每个归档都有一个默认的清单文件。                                                         |
| M    | 不为条目创建清单文件                                                                                                                                                |
| t    | 显示内容表                                                                                                                                                          |
| u    | 更新一个已有的 jar 文件                                                                                                                                             |
| v    | 生成详细的输出结果                                                                                                                                                  |
| x    | 解压文件。如果提供一个或多个文件名，只解压这些文件；否则，解压所有文件                                                                                              |
| 0    | 存储，不进行 ZIP 压缩                                                                                                                                               |

