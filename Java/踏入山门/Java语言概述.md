## 0. 前言（清华大学郑莉）

计算机程序设计——对问题进行抽象，用计算机语言表述，利用机器求解。

“C语言在很大程度上可以代替汇编语言”。

编译连接以后生成的可执行程序一定是与平台相关的，因为每个机器的系统不同，其指令集就不同。

编译执行的效率要高于解释——解释需要“翻译一行执行一行”，编译则已经完成翻译了，直接执行。

可移植不同与跨平台，可移值指不修改或修改极少的源代码，但仍需重新编译，跨平台则编译都不需要。

### 关于面向对象

面向对象的思想：将客观事物看作具有状态和行为的对象，通过抽象找出同一类对象的共同状态和行为，构成类。

一个完整的类型应该包含着它的数据、结构，以及这个数据能够参与的操作及操作规则。

面向对象给软件开发带来的益处：可重用性、可靠性。

如果一个语言只支持类而不支持继承和多态，那么不能说它是面向对象的语言，只能说它是基于对象的语言。

### 关于Java

Java语言的特点：面向对象、安全性。后者指Java不支持指针且内部有安全措施。

Java中没有全局变量，可以在类中定义公用、静态的数据成员实现相同功能。

Java不支持操作符重载。

Java语言中，能够独立运行的程序称为**应用程序（Application）**，而Java还有另外一种程序，称为**Java小程序（Applet）** ，其是运行于各种网页中、用于增强网页的人机交互、动画显示、声音播放等功能的程序。

标准输入/输出：C/C++/Java都没有输入输出语句，而Fortran有（？）。C语言用函数库来实现输入输出，Java用类库……

## 1. 概念

Java语言是一门非常纯粹的面向对象编程语言，它吸收了C++语言的各种优点，又摒弃了C++里难以理解的多继承、指针等概念，因此Java语言具有功能强大和简单易用两个特征。

Java程序必须以类（class）的形式存在，类是Java程序的最小程序单位，Java不允许可执行性语句、方法等成分独立存在，所有的程序部分都必须放在类定义里。

Java是语言本身支持了多线程，而C语言是需要调用操作系统的接口来实现多线程。

从某种程度上来看，学精了Java语言的相关方面，相当于系统地学习了软件开发相关知识，而不是仅仅学完了一门编程语言。

Java的三个版本：

- J2SE: 整个Java技术的核心和基础，它是J2ME和J2EE编程的基础
- J2EE: Java技术中应用最广泛的部分，J2EE提供了企业应用开发相关的完整解决方案
- J2ME: 主要用于控制移动设备和信息家电等有限存储的设备

Java源程序命名：

1. 扩展名必须是.java

2. 通常情况下，源程序的主文件名可以是任意的；然而，如果Java程序源代码里定义了一个public类，该源文件名必须与该public类的类名相同。

3. 由于Java程序源文件的文件名必须与public类的类名相同，因此，一个java源文件里最多只能定义一个public类。

## 2. Java的编译、执行

Java语言编写的程序需要经过编译步骤，但这个编译步骤并不会产生特定平台的机器码，而是生成一种与平台无关的**字节码**（也就是*.class文件），这种字节码不是可执行的，必须使用**Java虚拟机**来解释执行。因此可以认为，Java语言既是编译型语言，又是解释型语言。

![1](https://chua-n.gitee.io/figure-bed/notebook/Java/1.png)

javac编译后生成的字节码文件有默认的文件名：文件名总是以源文件所定义类的类名作为主文件名，以.class作为扩展名。这意味着如果一个源文件里定义了多个类，将编译生成多个字节码文件。

运行java程序的命令是：`java Java类名`。

如果想在运行Java程序时临时指定JRE搜索Java类的路径，则可以使用**-classpath选项**（或用-cp选项，-cp是简写，作用完全相同），即格式为：

```cmd
java -classpath dir1;dir2;dir3…;dirN Java类
```

其中;是windows下对路径的分隔符，在linux下应该以:分隔。

Java解释器规定：如需某个类被解释器直接解释执行，则这个类里必须包含main方法，且其必须使用public     static void来修饰，同时其形参必须是字符串数组类型String[] args。

- 这意味着main方法的写法几乎是固定的，Java虚拟机就从这个main方法开始解释执行，因此，main方法是程序的入口。

- 若运行Java程序时在类名后紧跟一个或多个字符串（多个字符串之间以空格隔开），JVM就会把这些字符依次赋给args数组元素；若某参数本身包含了空格，则应该将该参数用双引号("")括起来，否则JVM会将这个空格当成参数分隔符，而非一个单独的参数。

    ![2](https://chua-n.gitee.io/figure-bed/notebook/Java/2.png)

## 3. JDK、JVM、JRE

JDK是Java开发工具包，Java     Development Kit，如果需要开发Java程序，则应该选择安装JDK；当然，安装了JDK之后，就包含了JRE，也可以运行Java程序。

JVM是一个抽象的计算机，和实际的计算机一样，它具有指令集并使用不同的存储区域。它负责执行指令，还要管理数据、内存和寄存器。

JRE是Java运行时环境，Java Runtime     Environment，它是运行Java程序的必需条件。简单地说，JRE包含JVM，一般而言，如果只是运行java程序，可以只安装JRE，无须安装JDK。

## 4. Java环境变量：JAVA_HOME、CLASSPATH

> Java有两个重要的相关环境变量需要理解及正确配置。

安装好Java以后，各种IDE、Tomcat等软件是通过搜索操作系统的PATH环境变量来找到你安装的Java软件的，因而需要在PATH中配置Java的安装目录。通过像这样配置：在操作系统中新增JAVA_HOME环境变量，令其为Java安装目录，然后在PATH中添加一项来引用JAVA_HOME，即

| 环境变量  |                内容                |
| :-------: | :--------------------------------: |
| JAVA_HOME | C:\Program Files\Java\jdk1.8.0_291 |
|   PATH    |          %JAVA_HOME%\bin           |

对于CLASSPATH环境变量，其含义是指定Java程序执行时JRE搜索Java类的路径，只有该.class文件包含在CLASSPATH的路径中，JRE才能找到该字节码文件并解释执行。

你可以选择在操作系统中添加一个CLASSPATH属性，并指定相关文件夹路径以提供给JRE，如

| 环境变量  |             内容              |
| :-------: | :---------------------------: |
| CLASSPATH | .;C:\Users\chuan\Desktop\temp |

就将当前目录即桌面的temp/文件夹赋予了CLASSPATH。不过，这样未免太麻烦，事实上在默认情况下（不在操作系统中设置CLASSPATH环境变量），每次JRE执行时都会将当前目录作为搜索路径添加到CLASSPATH中，因而它总能找到当前目录下的Java可执行文件；此外，如果你需要执行其他目录下的.class文件，也通过在命令行下使用java命令的-classpath属性指定搜索路径`java -classpath dir1;dir2;dir3…;dirN JavaClassName`，或通过set命令`set classpath=dir1;dir2`设定搜索路径，达到同样的效果，不过要指出的是，这两种命令行的方法设置CLASSPATH属性都具有临时性——只在当前命令行中有效。

需要进一步指出的是，一旦你像上述表格一样显示指定了CLASSPATH环境变量，（且执行时没有通过命令行额外增加搜索路径，）那么JRE便只会在该环境变量中搜索Java类。这也就是说，如果你将CLASSPATH显示设置为C:\Users\chuan\Desktop\temp，也即没有增加当前路径，那么即便你在某个目录下想要执行当前目录的.class文件，JRE也会报错。

## 5. Java垃圾回收

通常JRE会提供一个后台线程来进行检测和控制，一般都是在在CPU空闲或内存不足时自动进行垃圾回收，而程序员无法精确控制垃圾回收的时间和顺序等。

事实上，除释放没用的对象外，垃圾回收也可以清除内存记录碎片，碎片整理将所占用的堆内存移到堆的一端，JVM将整理出的内存分配给新的对象。

垃圾回收的一个潜在缺点是它的开销影响程序性能。因为JVM必须跟踪程序中有用的对象，才可以确定哪些对象是无用的对象，并最终释放这些无用的对象，这个过程需要花费处理器的时间。

为了更快地让垃圾回收器回收那些不再使用的对象，可以将该对象的引用变量设置为null，以此暗示垃圾回收器可以回收该对象。

虽然程序员可以通过调用Runtime对象的gc()或System.gc()等方法来建议系统进行垃圾回收，但这种调用仅仅是建议，依然不能精确控制垃圾回收机制的执行。

## 6. 关于Java9

模块化系统是JDK 9的重大更新，为此JDK专门引入了一种新的JMOD格式。

JDK 9工具的一大改进就是提供了jshell工具，它是一个交互式的命令行界面，可用于执行java语言的变量声明、语句和表达式，且可以立即看到执行结果。

除了/help,/exit之外，jshell还有如下常用命令：

- `/help`：
- `/exit`：
- `/list`：列出用户输入的所有源代码
- `/edit`：编辑用户输入的第几条源代码，jshell会启动一个文本编辑界面。
- `/drop`：删除用户输入的第几条源代码
- `/save`：保存用户输入的源代码
- `/vars`：列出用户定义的所有变量
- `/methods`：列出用户定义的全部方法
- `/types`：列出用户定义的全部类型



